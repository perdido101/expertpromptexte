<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ExpertPrompt</title>
  <link rel="stylesheet" href="popup.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <div class="header-icon">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <circle cx="12" cy="8" r="4"/>
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
          </svg>
        </div>
        <h1 class="header-title">ExpertPrompt</h1>
      </div>
      <div class="header-actions">
        <button id="settings-btn" class="icon-btn" title="Settings">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="3"/>
            <path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Settings Panel -->
    <div id="settings-panel" class="settings-panel hidden">
      <div class="settings-header">
        <span>Settings</span>
        <button id="close-settings" class="icon-btn-sm">&times;</button>
      </div>
      <div class="settings-content">
        <label for="language-select" class="field-group-inline">
          <span>Language</span>
          <select id="language-select" class="field-select-sm">
            <option value="en">English</option>
            <option value="el">Ελληνικά</option>
          </select>
        </label>
        <label class="toggle-row">
          <span>Auto-add guardrails for sensitive roles</span>
          <input type="checkbox" id="guardrails-toggle" checked>
          <span class="toggle-slider"></span>
        </label>
        <p class="settings-note">All data is stored locally in your browser. No external network calls are made.</p>
      </div>
    </div>

    <!-- Search Section -->
    <div class="search-section">
      <div class="search-input-wrapper">
        <input type="text" id="role-input" class="search-input" placeholder="Search expert role..." autocomplete="off" spellcheck="false"/>
        <button id="clear-btn" class="clear-btn hidden" type="button" aria-label="Clear">&times;</button>
      </div>
      <div id="suggestions" class="suggestions hidden"></div>
    </div>

    <!-- Role Chain Section -->
    <div id="chain-section" class="collapsible-section">
      <button class="section-header" data-toggle="chain-content">
        <span>Role Chain</span>
        <span class="chain-count hidden" id="chain-count">0</span>
        <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
      <div id="chain-content" class="section-content hidden">
        <div id="chain-list" class="chain-list"></div>
        <button id="add-to-chain" class="btn-secondary btn-sm" disabled>+ Add selected role</button>
      </div>
    </div>

    <!-- Task/Context Section -->
    <div id="context-section" class="collapsible-section">
      <button class="section-header" data-toggle="context-content">
        <span>Task & Context</span>
        <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
      <div id="context-content" class="section-content hidden">
        <div class="field-group">
          <label for="task-input">Task / Goal</label>
          <input type="text" id="task-input" class="field-input" placeholder="e.g., Review my landing page copy">
        </div>
        <div class="field-group">
          <label for="context-input">Context</label>
          <textarea id="context-input" class="field-textarea" rows="2" placeholder="e.g., B2B SaaS, targeting CTOs"></textarea>
        </div>
        <div class="field-group">
          <label for="output-format-select">Output Format</label>
          <select id="output-format-select" class="field-select">
            <option value="">Default</option>
            <option value="bullet">Bullet points</option>
            <option value="numbered">Numbered list</option>
            <option value="paragraph">Paragraph format</option>
            <option value="table">Table format</option>
            <option value="json">JSON structure</option>
            <option value="markdown">Markdown</option>
            <option value="executive">Executive summary</option>
            <option value="detailed">Detailed analysis</option>
            <option value="comparison">Comparison/Pros & Cons</option>
            <option value="actionable">Actionable steps only</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Mode & Constraints Section -->
    <div id="constraints-section" class="collapsible-section">
      <button class="section-header" data-toggle="constraints-content">
        <span>Mode & Constraints</span>
        <svg class="chevron" width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
      <div id="constraints-content" class="section-content hidden">
        <div class="field-group">
          <label for="mode-select">Mode</label>
          <select id="mode-select" class="field-select">
            <option value="default">Default</option>
            <option value="absolute">Absolute (blunt, no fluff)</option>
            <option value="collaborative">Collaborative (asks questions)</option>
            <option value="executive">Executive Summary</option>
          </select>
        </div>
        <div class="constraints-grid">
          <label class="constraint-toggle"><input type="checkbox" id="c-no-questions"><span>No questions</span></label>
          <label class="constraint-toggle"><input type="checkbox" id="c-no-emojis"><span>No emojis</span></label>
          <label class="constraint-toggle"><input type="checkbox" id="c-bullets"><span>Bullet points</span></label>
          <label class="constraint-toggle"><input type="checkbox" id="c-concise"><span>Ultra concise</span></label>
          <label class="constraint-toggle"><input type="checkbox" id="c-stepbystep"><span>Step-by-step</span></label>
          <label class="constraint-toggle"><input type="checkbox" id="c-risks"><span>Include risks</span></label>
        </div>
        <label class="constraint-toggle mt-sm"><input type="checkbox" id="c-first-output"><span>Specify first output</span></label>
        <div id="first-output-group" class="field-group hidden" style="margin-top: 8px;">
          <input type="text" id="first-output-input" class="field-input" placeholder="e.g., Start with a summary">
        </div>
      </div>
    </div>

    <!-- Divider -->
    <div class="prompt-section-divider"></div>

    <!-- Guardrails Notice -->
    <div id="sensitive-disclaimer" class="disclaimer hidden">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/><path d="M8 5V8.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/><circle cx="8" cy="11" r="0.75" fill="currentColor"/></svg>
      <span>Guardrail added: informational-only disclaimer included.</span>
    </div>

    <!-- Prompt Preview -->
    <div id="prompt-panel" class="prompt-panel hidden">
      <div class="prompt-header">
        <span>Generated Prompt</span>
        <label class="edit-toggle"><input type="checkbox" id="edit-toggle"><span>Edit</span></label>
      </div>
      <div id="prompt-content" class="prompt-content"></div>
      <textarea id="prompt-editor" class="prompt-editor hidden"></textarea>
    </div>

    <!-- Empty State -->
    <div id="empty-state" class="empty-state">
      <p class="helper-text">Search and select a role to generate your prompt.</p>
    </div>

    <!-- Actions Row -->
    <div class="actions-row">
      <button id="copy-btn" class="btn-primary" disabled>
        <span class="btn-text">Copy</span>
        <span class="btn-success hidden">Copied!</span>
      </button>
      <button id="export-btn" class="btn-secondary" disabled>Export</button>
    </div>

    <!-- Export Menu -->
    <div id="export-menu" class="dropdown-menu hidden">
      <button data-format="txt">Export as .txt</button>
      <button data-format="md">Export as .md</button>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
